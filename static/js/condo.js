function ready(e,t){if(e)throw e;var o=topojson.feature(t,{type:"GeometryCollection",geometries:t.objects.Dist.geometries}),n=d3version3.geo.mercator().center([98,27]).scale(800),a=d3version3.geo.path().projection(n),r=d3version3.select("body").append("div").attr("class","tooltip").style("opacity",0);d3version3.select("svg.condo").selectAll("path").data(o.features).enter().append("path").attr("d",a).attr("fill",function(e){var t=condoData.get(e.properties.DISTRICT);return 0!=t?condo_color(t):"lightblue"}).on("mouseover",function(e){d3version3.select(this).transition().duration(300).style("opacity",1),r.transition().duration(300).style("opacity",1),r.text(e.properties.DISTRICT+" District in "+e.properties.ST_NM+"  "+condoData.get(e.properties.DISTRICT)).style("left",d3version3.event.pageX+"px").style("top",d3version3.event.pageY-30+"px")});var i=d3version3.select("svg.condo").selectAll("g.condolegend").data(ext_condocolor_domain).enter().append("g").attr("class","condolegend"),d=20,s=20;i.append("rect").attr("x",20).attr("y",function(e,t){return height-t*s-2*s}).attr("width",d).attr("height",s).style("fill",function(e,t){return condocolor(e)}).style("opacity",.8),i.append("text").attr("x",50).attr("y",function(e,t){return height-t*s-s-4}).text(function(e,t){return condolegend_labels[t]})}var condocolor_domain=[50,150,350,750,1500,1750],ext_condocolor_domain=[0,50,150,350,750,1500,2250],condolegend_labels=["= 0"," > 3","< 3","< 7","< 14","< 21","N/A"],condocolor=d3version3.scale.threshold().domain(condocolor_domain).range(["lightblue","#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#0000"]),width=960,height=500,condo_domain=[3,7,14,21,30],condo_color=d3version3.scale.threshold().domain(condo_domain).range(["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"]),condoData=d3version3.map();queue().defer(d3version3.json,"/static/data/india-districts.json").defer(d3version3.csv,"/static/data//sorted24.csv",function(e){isNaN(e.total)?(console.log("we have a zero here"),condoData.set(e.district,0)):condoData.set(e.district,+e.total)}).await(ready);
