function ready(e,t){if(e)throw e;var r=topojson.feature(t,{type:"GeometryCollection",geometries:t.objects.Dist.geometries}),i=d3version3.geo.mercator().center([98,27]).scale(800),a=d3version3.geo.path().projection(i),o=d3version3.select("body").append("div").attr("class","tooltip").style("opacity",0);d3version3.select("svg.feferti").selectAll("path").data(r.features).enter().append("path").attr("d",a).attr("fill",function(e){var t=FeFertiData.get(e.properties.DISTRICT);return 0!=t?FeFerti_color(t):"lightblue"}).on("mouseover",function(e){d3version3.select(this).transition().duration(300).style("opacity",1),o.transition().duration(300).style("opacity",1),o.text(e.properties.DISTRICT+" District in "+e.properties.ST_NM+"  "+FeFertiData.get(e.properties.DISTRICT)).style("left",d3version3.event.pageX+"px").style("top",d3version3.event.pageY-30+"px")});var n=d3version3.select("svg.feferti").selectAll("g.fefertilegend").data(ext_feferticolordomain).enter().append("g").attr("class","fefertilegend"),s=20,d=20;n.append("rect").attr("x",20).attr("y",function(e,t){return height-t*d-2*d}).attr("width",s).attr("height",d).style("fill",function(e,t){return feferticolor(e)}).style("opacity",.8),n.append("text").attr("x",50).attr("y",function(e,t){return height-t*d-d-4}).text(function(e,t){return fefertilegend_labels[t]})}var feferticolordomain=[50,150,350,750,1500],ext_feferticolordomain=[0,50,150,350,750,1500],fefertilegend_labels=[" = 0","> 20","< 20","< 40","< 60","N/A"],feferticolor=d3version3.scale.threshold().domain(feferticolordomain).range(["#ff7f00","#984ea3","#4daf4a","#377eb8","#e41a1c"]),width=960,height=500,FeFerti_domain=[0,20,40,60,80],FeFerti_color=d3version3.scale.threshold().domain(FeFerti_domain).range(["#ff7f00","#984ea3","#4daf4a","#377eb8","#e41a1c"]),FeFertiData=d3version3.map();queue().defer(d3version3.json,"static/data/india-districts.json").defer(d3version3.csv,"static/data/sorted20.csv",function(e){isNaN(e.total)?(console.log("we have a zero here"),FeFertiData.set(e.district,0)):FeFertiData.set(e.district,+e.total)}).await(ready);
